<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üíê A Question</title>
  <style>
    :root{
      --bg1:#fff1f7;
      --bg2:#ffe6f1;
      --ink:#222235;
      --pink:#ff4fa4;
      --pink2:#ff78bd;
      --card:#ffffff;
      --shadow: 0 18px 45px rgba(0,0,0,.12);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--ink);
      min-height:100vh;
      display:grid;
      place-items:center;
      background:
        radial-gradient(1200px 700px at 20% 25%, #ffffff 0%, var(--bg1) 35%, var(--bg2) 100%);
      overflow:hidden;
    }

    /* floating background hearts */
    .bg-heart{
      position:absolute;
      width:18px; height:18px;
      transform: rotate(45deg);
      opacity:.16;
      filter: blur(.2px);
      background: #ff8bc8;
      animation: floatUp linear infinite;
    }
    .bg-heart:before,.bg-heart:after{
      content:"";
      position:absolute;
      width:18px; height:18px;
      background:#ff8bc8;
      border-radius:50%;
    }
    .bg-heart:before{ left:-9px; top:0;}
    .bg-heart:after{ left:0; top:-9px;}
    @keyframes floatUp{
      from{ transform: translateY(40px) rotate(45deg); }
      to{ transform: translateY(-120vh) rotate(45deg); }
    }

    .wrap{
      width:min(1100px, 95vw);
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: 26px;
      align-items:center;
    }
    @media (max-width: 980px){
      .wrap{ grid-template-columns: 1fr; gap:18px; }
    }

    .left{
      position:relative;
      padding: 18px 6px;
      min-height: 560px;
      display:grid;
      place-items:center;
    }

    canvas{
      width:100%;
      max-width:560px;
      aspect-ratio: 1 / 1;
      border-radius: 28px;
    }

    .top-note{
      position:absolute;
      top: 18px;
      left: 18px;
      font-weight:700;
      font-size: 18px;
      opacity:.92;
      display:flex;
      gap:10px;
      align-items:center;
      background: rgba(255,255,255,.65);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,.7);
      padding: 10px 14px;
      border-radius: 999px;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
    }

    .right{
      position:relative;
      min-height: 560px;
      display:grid;
      place-items:center;
    }

    .card{
      width:100%;
      max-width: 460px;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px;
      border: 1px solid rgba(255,255,255,.8);
      transform: translateY(10px);
      opacity:0;
      pointer-events:none;
    }
    .card.show{
      opacity:1;
      pointer-events:auto;
      transform: translateY(0px);
      transition: opacity .55s ease, transform .55s ease;
    }

    h1{
      margin: 6px 0 10px;
      font-size: 44px;
      line-height: 1.02;
      letter-spacing: -0.6px;
    }
    .subtitle{
      margin:0 0 14px;
      opacity:.78;
      font-size:16px;
    }

    .meme{
      width:100%;
      height: 220px;
      border-radius: 18px;
      background: linear-gradient(135deg, #ffe3f2, #ffeef7);
      border: 1px dashed rgba(255,79,164,.55);
      display:grid;
      place-items:center;
      overflow:hidden;
      position:relative;
      margin: 12px 0 16px;
    }
    .meme img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:none;
    }
    .meme .hint{
      text-align:center;
      padding: 0 18px;
      color:#7b4562;
      font-size: 14px;
      line-height:1.35;
    }

    .btn-row{
      display:flex;
      gap: 12px;
      align-items:center;
      justify-content:center;
      margin-top: 4px;
    }
    button{
      border:none;
      border-radius: 18px;
      padding: 14px 18px;
      font-weight:800;
      font-size: 18px;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
    }
    button:active{ transform: scale(.98); }

    .yes{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:white;
      width: 170px;
      box-shadow: 0 14px 30px rgba(255,79,164,.35);
    }
    .yes:hover{ filter: brightness(1.03); }

    .tiny{
      font-size: 13px;
      opacity:.72;
      text-align:center;
      margin-top: 12px;
    }

    .accepted{
      display:none;
      margin-top: 12px;
      padding: 12px 14px;
      border-radius: 16px;
      background: rgba(255,79,164,.10);
      border: 1px solid rgba(255,79,164,.25);
      font-weight: 700;
      text-align:center;
    }
    .accepted.show{ display:block; }

    /* celebration hearts */
    .pop-heart{
      position:fixed;
      width:16px; height:16px;
      transform: rotate(45deg);
      opacity:1;
      pointer-events:none;
      background: #ff4fa4;
      z-index: 9999;
    }
    .pop-heart:before,.pop-heart:after{
      content:"";
      position:absolute;
      width:16px; height:16px;
      background: inherit;
      border-radius:50%;
    }
    .pop-heart:before{ left:-8px; top:0;}
    .pop-heart:after{ left:0; top:-8px;}
  </style>
</head>

<body>
  <!-- background hearts -->
  <script>
    // sprinkle floating background hearts
    for (let i=0;i<18;i++){
      const h = document.createElement('div');
      h.className = 'bg-heart';
      const left = Math.random()*100;
      const dur = 10 + Math.random()*14;
      const delay = -Math.random()*dur;
      const size = 10 + Math.random()*18;
      h.style.left = left+'vw';
      h.style.bottom = (-10 - Math.random()*30)+'vh';
      h.style.animationDuration = dur+'s';
      h.style.animationDelay = delay+'s';
      h.style.width = size+'px';
      h.style.height = size+'px';
      h.style.opacity = (0.09 + Math.random()*0.16).toFixed(2);
      h.style.background = (Math.random()<0.4)?'#ff4fa4':'#ff8bc8';
      document.body.appendChild(h);
    }
  </script>

  <div class="wrap">
    <section class="left">
      <div class="top-note">üíê Made for you</div>
      <canvas id="flower" width="800" height="800"></canvas>
    </section>

    <section class="right">
      <div class="card" id="card">
        <h1 id="q1">Will you be my</h1>
        <h1 id="q2" style="margin-top:-6px;">Valentine?</h1>
        <p class="subtitle" id="subtitle">Open the surprise‚Ä¶ then click YES üíù</p>

        <div class="meme" id="memeBox">
          <img id="memeImg" alt="meme" />
          <div class="hint" id="memeHint">
            Drop <b>meme.gif</b> or <b>meme.png</b> next to this file<br/>
            and it will appear here ‚ú®
          </div>
        </div>

        <div class="btn-row">
          <button class="yes" id="yesBtn">YES üíò</button>
        </div>

        <div class="accepted" id="accepted">
          YAYYYYY üíû<br/>Okay now I owe you a virtual bouquet üåπüåπüåπ
        </div>

        <div class="tiny">Tip: if you want, customize the text at the top of the HTML.</div>
      </div>
    </section>
  </div>

  <script>
    // ---------------------------
    // Load meme.gif / meme.png if present
    // ---------------------------
    (function loadMeme(){
      const img = document.getElementById('memeImg');
      const hint = document.getElementById('memeHint');

      const tryFiles = ['meme.gif','meme.png','meme.jpg','meme.jpeg'];
      let idx = 0;

      function tryNext(){
        if (idx >= tryFiles.length) return;
        const src = tryFiles[idx++];
        const test = new Image();
        test.onload = () => {
          img.src = src;
          img.style.display = 'block';
          hint.style.display = 'none';
        };
        test.onerror = tryNext;
        test.src = src;
      }
      tryNext();
    })();

    // ---------------------------
    // Flower canvas animation
    // ---------------------------
    const canvas = document.getElementById('flower');
    const ctx = canvas.getContext('2d');

    const center = { x: 400, y: 420 };
    let start = performance.now();

    function clamp(x,a,b){ return Math.max(a, Math.min(b, x)); }
    function smoothstep(t){ t = clamp(t,0,1); return t*t*(3-2*t); }
    function lerp(a,b,t){ return a+(b-a)*t; }

    function drawStem(grow){
      // stem curve
      ctx.lineCap = "round";
      ctx.lineJoin = "round";

      const x0 = center.x - 30, y0 = 760;
      const x1 = center.x, y1 = center.y + 30;

      // quadratic control
      const cx = center.x - 120, cy = 610;

      // draw partial quadratic by sampling points
      const steps = 80;
      ctx.beginPath();
      for(let i=0;i<=steps;i++){
        const t = (i/steps) * grow;
        const x = (1-t)*(1-t)*x0 + 2*(1-t)*t*cx + t*t*x1;
        const y = (1-t)*(1-t)*y0 + 2*(1-t)*t*cy + t*t*y1;
        if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
      }
      ctx.strokeStyle = "#16784a";
      ctx.lineWidth = 26;
      ctx.stroke();

      ctx.strokeStyle = "#2bb36a";
      ctx.lineWidth = 14;
      ctx.stroke();

      // leaves (appear with grow)
      const leafA = smoothstep((grow-0.35)/0.65);
      if (leafA > 0.02){
        drawLeaf(
          {x: lerp(x0,x1,0.58), y: lerp(y0,y1,0.58)},
          {x: lerp(x0,x1,0.58)-220*leafA, y: lerp(y0,y1,0.58)-60*leafA},
          62*leafA,
          "#2aa45f"
        );
        drawLeaf(
          {x: lerp(x0,x1,0.72), y: lerp(y0,y1,0.72)},
          {x: lerp(x0,x1,0.72)+240*leafA, y: lerp(y0,y1,0.72)-40*leafA},
          58*leafA,
          "#239857"
        );
      }
    }

    function drawLeaf(p0, p1, width, color){
      const dx = p1.x - p0.x, dy = p1.y - p0.y;
      const len = Math.hypot(dx, dy) || 1;
      const ux = dx/len, uy = dy/len;
      const nx = -uy, ny = ux;

      const pts = [];
      const steps = 26;
      for(let i=0;i<=steps;i++){
        const t=i/steps;
        const w=width*Math.sin(Math.PI*t);
        pts.push({x:p0.x+dx*t+nx*w, y:p0.y+dy*t+ny*w});
      }
      for(let i=steps;i>=0;i--){
        const t=i/steps;
        const w=width*Math.sin(Math.PI*t);
        pts.push({x:p0.x+dx*t-nx*w, y:p0.y+dy*t-ny*w});
      }
      ctx.beginPath();
      ctx.moveTo(pts[0].x, pts[0].y);
      for(const p of pts) ctx.lineTo(p.x,p.y);
      ctx.closePath();
      ctx.fillStyle = color;
      ctx.fill();

      ctx.strokeStyle = "rgba(0,0,0,.10)";
      ctx.lineWidth = 2;
      ctx.stroke();
    }

    function drawPetal(angle, bloom, layer){
      const L = (layer===0) ? lerp(40, 230, bloom) : lerp(30, 180, bloom);
      const W = (layer===0) ? lerp(10, 110, bloom) : lerp(10, 80, bloom);

      // build teardrop shape points in local, then rotate
      const steps = 34;
      const pts = [];

      for(let i=0;i<=steps;i++){
        const t=i/steps;
        const x = -W*Math.sin(Math.PI*t)*(0.78+0.22*t);
        const y = -L*Math.pow(t, 1.08);
        pts.push({x,y});
      }
      for(let i=steps;i>=0;i--){
        const t=i/steps;
        const x = W*Math.sin(Math.PI*t)*(0.78+0.22*t);
        const y = -L*Math.pow(t, 1.08);
        pts.push({x,y});
      }

      // slight curl while opening
      const curl = lerp(0.30, 0.04, bloom);

      ctx.beginPath();
      for(let i=0;i<pts.length;i++){
        const p = pts[i];
        const tipFactor = clamp((-p.y)/L, 0, 1);
        const bend = curl * (tipFactor*tipFactor) * (Math.cos(angle)>=0 ? 1 : -1);
        const th = angle + bend;

        const xr = p.x*Math.cos(th) - p.y*Math.sin(th);
        const yr = p.x*Math.sin(th) + p.y*Math.cos(th);

        const X = center.x + xr;
        const Y = center.y + yr + (layer===1 ? 10 : 0);

        if(i===0) ctx.moveTo(X,Y); else ctx.lineTo(X,Y);
      }
      ctx.closePath();

      const fill = (layer===0) ? "rgba(255, 135, 200, 0.95)" : "rgba(255, 95, 170, 0.95)";
      const stroke = (layer===0) ? "rgba(255, 70, 150, 0.55)" : "rgba(235, 40, 120, 0.6)";

      ctx.fillStyle = fill;
      ctx.fill();

      ctx.strokeStyle = stroke;
      ctx.lineWidth = 2;
      ctx.stroke();
    }

    function drawCenter(bloom){
      // pollen
      const r = lerp(18, 44, bloom);
      ctx.beginPath();
      ctx.arc(center.x, center.y, r, 0, Math.PI*2);
      ctx.fillStyle = "#ffd25a";
      ctx.fill();
      ctx.lineWidth = 4;
      ctx.strokeStyle = "rgba(220,140,40,.65)";
      ctx.stroke();

      // dots
      for(let i=0;i<18;i++){
        const a = (i/18)*Math.PI*2;
        const rr = 22 + 4*Math.sin(performance.now()/500 + i);
        const x = center.x + rr*Math.cos(a);
        const y = center.y + rr*Math.sin(a);
        ctx.beginPath();
        ctx.arc(x,y,3.2,0,Math.PI*2);
        ctx.fillStyle = "rgba(210,140,55,.9)";
        ctx.fill();
      }
    }

    function draw(now){
      const elapsed = (now - start) / 1000;

      // Stage timing
      const stemT = smoothstep(elapsed / 1.6);
      const bloomT = smoothstep((elapsed - 1.1) / 2.2);

      // clear
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // soft vignette
      const g = ctx.createRadialGradient(340, 320, 80, 400, 420, 520);
      g.addColorStop(0, "rgba(255,255,255,0.0)");
      g.addColorStop(1, "rgba(255,140,200,0.10)");
      ctx.fillStyle = g;
      ctx.fillRect(0,0,canvas.width,canvas.height);

      drawStem(stemT);

      // petals: outer then inner
      const wiggle1 = 0.18*Math.sin(elapsed*1.3);
      const wiggle2 = 0.16*Math.sin(elapsed*1.6 + 1);

      const outer = 10;
      for(let i=0;i<outer;i++){
        const ang = (i/outer)*Math.PI*2 + wiggle1;
        drawPetal(ang, bloomT, 0);
      }
      const inner = 8;
      for(let i=0;i<inner;i++){
        const ang = (i/inner)*Math.PI*2 + 0.25 + wiggle2;
        drawPetal(ang, bloomT, 1);
      }

      drawCenter(bloomT);

      // show card when bloom done
      if (elapsed > 3.4){
        document.getElementById('card').classList.add('show');
      }

      requestAnimationFrame(draw);
    }
    requestAnimationFrame(draw);

    // ---------------------------
    // YES button celebration
    // ---------------------------
    const yesBtn = document.getElementById('yesBtn');
    const accepted = document.getElementById('accepted');

    function popHearts(x,y, n=45){
      for(let i=0;i<n;i++){
        const h = document.createElement('div');
        h.className = 'pop-heart';
        const size = 10 + Math.random()*16;
        h.style.width = size+'px';
        h.style.height = size+'px';

        // different colors
        const colors = ['#ff4fa4','#ff78bd','#ff3b7d','#ff9ad0','#ffd1e7'];
        h.style.background = colors[(Math.random()*colors.length)|0];

        h.style.left = (x - size/2) + 'px';
        h.style.top  = (y - size/2) + 'px';

        const ang = Math.random()*Math.PI*2;
        const spd = 3 + Math.random()*6;
        const vx = Math.cos(ang)*spd;
        const vy = Math.sin(ang)*spd - (5 + Math.random()*3);

        const gravity = 0.18 + Math.random()*0.08;
        let px = x, py = y;
        let life = 90 + (Math.random()*60|0);

        document.body.appendChild(h);

        function step(){
          life--;
          py += vy;
          px += vx;
          // gravity pulls down
          // (simulate by increasing vy via gravity)
          // but keep it simple: add to py directly
          py += gravity*(90-life)/6;

          h.style.left = (px - size/2) + 'px';
          h.style.top  = (py - size/2) + 'px';
          h.style.opacity = (life/150).toFixed(2);

          if(life>0) requestAnimationFrame(step);
          else h.remove();
        }
        requestAnimationFrame(step);
      }
    }

    yesBtn.addEventListener('click', (e)=>{
      yesBtn.textContent = "YAY! üíû";
      yesBtn.style.filter = "brightness(1.03)";
      accepted.classList.add('show');

      const r = yesBtn.getBoundingClientRect();
      popHearts(r.left + r.width/2, r.top + r.height/2, 70);
    });
  </script>
</body>
</html>
